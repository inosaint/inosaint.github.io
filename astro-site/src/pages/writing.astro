---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const internalWritings = await getCollection('writing');

const externalWritings = [
  {
    title: 'Squads as a Growth Engine for Designers',
    description: 'How we used squads to help our designers level up at Jiva',
    url: 'https://medium.com/notes-from-the-fields/how-we-used-squads-to-help-our-designers-level-up-443fcbc52e2f',
    image: 'https://placehold.co/360x200',
    date: new Date('2023-06-15') // Add approximate dates for sorting
  },
  {
    title: 'How a sticker design became an unofficial Mascot',
    description: 'The story of how a last-minute sticker design became a beloved company icon',
    url: 'https://medium.com/notes-from-the-fields/more-than-swag-how-a-last-minute-sticker-became-a-company-icon-42d86246e736',
    image: 'https://placehold.co/360x200',
    date: new Date('2023-03-20')
  },
  {
    title: 'Designing the Akar Design System',
    description: 'Taming the chaos of hypergrowth with a lean approach to building a design system',
    url: 'https://medium.com/notes-from-the-fields/taming-the-chaos-of-hypergrowth-our-lean-approach-to-building-a-design-system-part-1-2adbb24ddef0',
    image: 'https://placehold.co/360x200',
    date: new Date('2022-09-10')
  },
  {
    title: 'How Gojek\'s design & research teams collaborate effectively across borders',
    description: 'Insights on cross-border collaboration',
    url: 'https://www.gojek.io/blog/near-far-wherever-we-are',
    image: 'https://placehold.co/360x200',
    date: new Date('2021-11-05')
  },
  {
    title: 'Gamify DesignOps with human connection',
    description: 'A talk about bringing human connection into DesignOps',
    url: 'https://www.youtube.com/watch?v=c__raLe34ZU',
    image: 'https://placehold.co/360x200',
    date: new Date('2021-05-15')
  }
];

// Combine and sort all writings by date (newest first)
const writings = [
  ...internalWritings.map((post) => ({
    title: post.data.title,
    description: post.data.description,
    url: `/writing/${post.slug}/`,
    image: post.data.image ?? 'https://placehold.co/360x200',
    date: new Date(post.data.date)
  })),
  ...externalWritings
].sort((a, b) => b.date.getTime() - a.date.getTime());
---

<BaseLayout title="Writing and Talks - Kenneth Mark Dsouza">
  <a href="/" class="back-link">‚Üê Back to Home</a>
  <div style="margin-bottom: 3rem;">
    <h1>Writing and Talks</h1>
  </div>

  <div class="grid">
    {writings.map(writing => (
      <a href={writing.url} target="_blank" rel="noopener noreferrer" class="card">
        <img
          src={writing.image}
          alt={writing.title}
          class="card-image"
        />
        <h3>{writing.title}</h3>
        <p>{writing.description}</p>
      </a>
    ))}
  </div>
</BaseLayout>
