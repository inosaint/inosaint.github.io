---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

const projects = await getCollection('projects');
---

<BaseLayout title="Projects - Kenneth Mark Dsouza">
  <a href="/" class="back-link">‚Üê Back to Home</a>
  <div style="margin-bottom: 3rem;">
    <h1>Projects</h1>
  </div>

  <div class="grid">
    {projects.map(project => (
      <a href={`/projects/${project.slug}`} class="card">
        {project.data.image ? (
          <Image
            src={project.data.image}
            alt={project.data.title}
            class="card-image"
            width={360}
            height={200}
          />
        ) : (
          <img
            src="https://placehold.co/360x200"
            alt={project.data.title}
            class="card-image"
          />
        )}
        <h3>{project.data.title}</h3>
        <p>{project.data.description}</p>
      </a>
    ))}
  </div>
</BaseLayout>
