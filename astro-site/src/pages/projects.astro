---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

const projects = await getCollection('projects');
---

<BaseLayout title="Projects - Kenneth Mark Dsouza">
  <nav class="breadcrumb-header">
    <div class="breadcrumb">
      <a href="/" class="breadcrumb-link">Home</a>
      <span class="breadcrumb-separator">/</span>
      <span class="breadcrumb-current">Projects</span>
    </div>
  </nav>

  <h1 style="margin-bottom: 3rem;">Projects</h1>

  <div class="grid">
    {projects.map(project => (
      <a href={`/projects/${project.slug}`} class="card">
        {project.data.image ? (
          <Image
            src={project.data.image}
            alt={project.data.title}
            class="card-image"
            width={360}
            height={200}
          />
        ) : (
          <img
            src="https://placehold.co/360x200"
            alt={project.data.title}
            class="card-image"
          />
        )}
        <h3>{project.data.title}</h3>
        <p>{project.data.description}</p>
      </a>
    ))}
  </div>
</BaseLayout>
